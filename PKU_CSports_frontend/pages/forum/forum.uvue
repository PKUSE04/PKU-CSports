<template>
	<view class="container">
		<!-- é¡¶éƒ¨çš„â€œå‘å¸ƒæ–°å¸–â€æŒ‰é’®ï¼ˆå‚è€ƒ image_827421.pngï¼‰ -->
		<view class="post-button-container">
			<button class="new-post-btn" @click="goToPostEdit">
				<uni-icons type="compose" size="20" color="#fff"></uni-icons>
				<text class="btn-text">å‘å¸ƒæ–°å¸–</text>
			</button>
		</view>

		<!-- è®ºå›åˆ†ç±» Tabs -->
		<scroll-view direction="horizontal" class="category-tabs">
			<view v-for="(category, index) in categories" :key="index" :class="['tab-item', { 'active': currentCategory === index }]" @click="switchCategory(index)">
				{{ category }}
			</view>
		</scroll-view>

		<!-- çƒ­é—¨è®¨è®ºåˆ—è¡¨ -->
		<view class="post-list">
			<view v-for="(post, index) in posts" :key="index" class="post-item" @click="goToCommentDetail">
				<!-- ç”¨æˆ·ä¿¡æ¯ -->
				<view class="user-info">
					<view class="avatar-placeholder"></view>
					<text class="username">{{ post.user }}</text>
					<text class="time">{{ post.time }}</text>
				</view>
				<!-- å¸–å­å†…å®¹ -->
				<view class="post-content">
					<text class="content-text">{{ post.text }}</text>
					<view v-if="post.images.length" class="image-preview">
						<!-- å›¾ç‰‡é¢„è§ˆåŒº -->
						<view v-for="(img, imgIndex) in post.images" :key="imgIndex" class="img-placeholder"></view>
					</view>
				</view>
				<!-- äº’åŠ¨åŒºåŸŸ -->
				<view class="interaction-bar">
					<view class="tag">{{ post.tag }}</view>
					<view class="stats">
						<text>ğŸ‘€ {{ post.views }}</text>
						<text>ğŸ’¬ {{ post.comments }}</text>
						<text>ğŸ‘ {{ post.likes }}</text>
					</view>
				</view>
			</view>
		</view>
		
		<!-- å ä½é¡µé¢ï¼Œç¡®ä¿å¯ä»¥æ»šåŠ¨ -->
		<view style="height: 50px;"></view>
	</view>
</template>

<script>
export default {
	data() {
		return {
			categories: ['å…¨éƒ¨', 'èµ›äº‹è®¨è®º', 'çƒå‘˜åˆ†æ', 'æˆ˜æœ¯ç ”ç©¶', 'è£…å¤‡äº¤æµ'],
			currentCategory: 0,
			// ç¤ºä¾‹å¸–å­æ•°æ®
			posts: [
				{ user: 'ç”¨æˆ·A', time: '2å°æ—¶å‰', text: 'ä¿¡ç§‘vså…ƒåŸ¹è¿™åœºè£åˆ¤ä»€ä¹ˆæ°´å¹³ï¼Ÿæœ€åé‚£ä¸ªç¦åŒºæ‰‹çƒæ˜æ˜¾åº”è¯¥ç‚¹çƒå•Šï¼', views: 328, comments: 42, likes: 76, tag: 'èµ›äº‹è®¨è®º', images: [] },
				{ user: 'ç”¨æˆ·B', time: '3å¤©å‰', text: 'å…‰åå­¦é™¢3å·å‰é”‹å¤ªå¼ºäº†ï¼é‚£ä¸ªè½¬èº«æ‘†è„±å¤ªå¸…äº†ï¼é€Ÿåº¦å¿«æŠ€æœ¯å¥½ï¼Œæ„Ÿè§‰ä»Šå¹´å…‰åæœ‰æœºä¼šå†²å† å†›å•Šï¼æœ‰äººçŸ¥é“ä»–å«ä»€ä¹ˆå—ï¼Ÿ', views: 876, comments: 128, likes: 215, tag: 'çƒå‘˜åˆ†æ', images: [1, 2, 3] },
				{ user: 'ç”¨æˆ·C', time: '1å‘¨å‰', text: 'æ±‚æ¨èä¸€æ¬¾æ€§ä»·æ¯”é«˜çš„è¶³çƒé‹ï¼Œé¢„ç®—500å·¦å³...', views: 400, comments: 50, likes: 100, tag: 'è£…å¤‡äº¤æµ', images: [] },
			]
		}
	},
	methods: {
		switchCategory(index) {
			this.currentCategory = index;
			console.log(`åˆ‡æ¢åˆ°è®ºå›åˆ†ç±»: ${this.categories[index]}`);
			// TODO: æ ¹æ®åˆ†ç±»åŠ è½½å¸–å­
		},
		goToPostEdit() {
			// è·³è½¬åˆ°â€œæ–°å»ºåšæ–‡â€é¡µé¢
			uni.navigateTo({
				url: '/pages/forum/post-edit'
			});
		},
		goToCommentDetail() {
			// è·³è½¬åˆ°å¸–å­/æˆ˜æŠ¥è¯„è®ºè¯¦æƒ…é¡µ
			uni.navigateTo({
				url: '/pages/forum/comment-detail'
			});
		}
	}
}
</script>

<style>
.container {
	background-color: #f8f8f8;
	min-height: 100vh;
	padding-top: 50px; /* ä¸ºæµ®åŠ¨æŒ‰é’®ç•™å‡ºç©ºé—´ */
}
/* å‘å¸ƒæŒ‰é’®å®¹å™¨ */
.post-button-container {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	z-index: 99;
	padding: 8px 10px;
	background-color: #fff;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
.new-post-btn {
	background-color: #409eff;
	color: #fff;
	font-size: 16px;
	border-radius: 20px;
	padding: 5px 0;
	display: flex;
	align-items: center;
	justify-content: center;
}
.btn-text { margin-left: 5px; }

/* åˆ†ç±» Tabs */
.category-tabs {
	white-space: nowrap;
	width: 100%;
	background-color: #fff;
	padding: 10px 0;
	margin-bottom: 10px;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}
.tab-item {
	display: inline-block;
	padding: 5px 15px;
	font-size: 14px;
	color: #666;
}
.tab-item.active {
	color: #409eff;
	font-weight: bold;
	position: relative;
}
.tab-item.active::after {
	content: '';
	position: absolute;
	bottom: -5px;
	left: 50%;
	transform: translateX(-50%);
	width: 60%;
	height: 3px;
	background-color: #409eff;
	border-radius: 2px;
}

/* å¸–å­åˆ—è¡¨ */
.post-list {
	padding: 0 10px;
}
.post-item {
	background-color: #fff;
	padding: 15px;
	border-radius: 10px;
	margin-bottom: 10px;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}
.user-info {
	display: flex;
	align-items: center;
	margin-bottom: 8px;
}
.avatar-placeholder {
	width: 35px;
	height: 35px;
	background-color: #ccc;
	border-radius: 50%;
	margin-right: 10px;
}
.username {
	font-weight: bold;
	color: #333;
	flex-grow: 1;
}
.time {
	font-size: 12px;
	color: #999;
}
.content-text {
	font-size: 15px;
	color: #333;
	margin-bottom: 10px;
	display: block;
}
.image-preview {
	display: flex;
	gap: 5px;
	margin-bottom: 10px;
}
.img-placeholder {
	width: 32%;
	height: 80px;
	background-color: #eee;
	border-radius: 5px;
}
.interaction-bar {
	display: flex;
	justify-content: space-between;
	align-items: center;
	font-size: 13px;
	color: #666;
}
.tag {
	background-color: #e6f7ff;
	color: #409eff;
	padding: 2px 8px;
	border-radius: 10px;
}

</style>